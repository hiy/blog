---
author: hiy
datetime: 2020-05-19
title: iPhoneのショートカットアプリとNFCタグで、Hueの照明をオンオフする
slug:
featured: false
draft: true
tags:
  - Hue
  - iPhone
  - ショートカット
  - NFC
ogImage: ""
description: iPhoneのショートカットアプリとNFCタグの連携を試してみました。
---

## はじめに

iPhoneのショートカットアプリとNFCタグの連携を試してみました。
<br />
iPhoneをNFCタグにかざすと、家に設置しているHue照明がオン/オフするようにします。
必要なものは、iPhone、NFCタグの２つで、アプリは「IFTTT」と「ショートカット」です。
<br />※事前に家のHue照明の設定済みです。

![nfctag.jpg](./nfctag.jpg)

![000.png](./000.png)

## IFTTTの設定

IFTTTのAppletを作成します。
Get moreから+ボタンで新規作成します。

![001.png](./001.png)

![002.png](./002.png)

次に「This」にWebhooksを割り当てます。

![003.png](./003.png)

![004.png](./004.png)

イベントに名前をつけます。この名前がWebhooksイベントのトリガーになるので、わかりやすい名前をつけておきます。
ここでは「toggle\_home\_lights」としました。

![005.png](./005.png)

次に「That」にHueを割り当てます。

![006.png](./006.png)
![007.png](./007.png)

Hueに照明をオン/オフするアクションを割り当てます。

![008.png](./008.png)

IFTTTからHueにログインして、どのライトをオン/オフするかを選択します。

![009.png](./009.png)

これでWebhooksとHueの設定は完了です。
<br/>
一旦、WebhooksとHueが正しく連携されていることを確認してみます。
「Get more」から「Documentation」を選択するとイベントをテストできます。

![010.png](./010.png)

![011.png](./011.png)

イベント名を「toggle\_home\_lights」を画面のテキストボックスに入力して、
「Test it」ボタンをタップします。
タップするとHueの照明がオン/オフすることが確認できると思います。

![012.png](./012.png)

ここで「ショートカット」アプリの設定で使用するためにURLをコピーしておきます。

![013.png](./013.png)

## ショートカットでオートメーションの作成

IFTTTで設定したWebhookをNFCタグと連携します。
ショートカットアプリのオートメーションのタブを選択して、右上の+ボタンをタップします。

![014.png](./014.png)

個人用オートメーションからNFCを選択します。

![016.png](./016.png)

![017.png](./017.png)

iPhoneの先端をNFCタグにかざしてスキャンして、タグに名前をつけます。
ここでは「電気」にしました。

![019.png](./019.png)

![021.png](./021.png)

「次へ」をタップして、
NFCタブにかざした時のアクションを追加します。
IFTTTのアプリでコピーしておいたURLにアクセスするために「Web」を選択します。

![022.png](./022.png)

![023.png](./023.png)

「URLの内容を取得」を選択して、IFTTTのアプリでコピーしておいたURLを貼り付けます。
<br />
「次へ」をタップして、オートメーションの作成を確定します。

![024.png](./024.png)

![025.png](./025.png)

最後に、毎回実行時に確認を挟むと面倒なので、
作成したオートメーションの「実行の前に尋ねる」は、オフにしておきます。

![028.png](./028.png)

完了すると赤枠のようになります。

![029.png](./029.png)

以上で、設定は完了です。
この状態で、iPhoneの先端をNFCタグにかざすことで、Hue照明がオン/オフすることができます。

iPhoneのショートカットアプリを使うことで、簡単にNFCタグと連携できることが確認できました。今後は他の使い道も考えてみようと思います。
